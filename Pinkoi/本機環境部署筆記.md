[公司文件](https://paper.dropbox.com/doc/Local--B0hjMBBBDMGyiNg4whzC4VkFAg-ggNEv2b1mB2c9dcb6YjHF)

### Containers for Local API Server

**無 Terminal**

- 法一

    ```bash
    # cd 至 pinkoi repo
    
    # 啟動
    make local-up
    
    # 關閉
    make local-down
    ```

- 法二

    ```bash
    # cd 至 pinkoi repo
    
    # 啟動
    make web-start
    
    # 關閉：至 Docker Desktop UI 關閉 container
    ```

**有 Terminal**

```bash
# cd 至 pinkoi repo

# 啟動
make web-debug

# control + c 關閉
```

---

### Container for VS Code

**Step1: 產生 `marketplace-local-vscode` repo**

```bash
# cd 至 pinkoi repo

make vscode-local-env
```

**Step2: Build Container**

- Step2-1: 使用 VS code 開啟 `marketplace-local-vscode` rep（會與 `pinkoi` repo 在同一層）

- Step2-2: 為避免 API Server Container 使用的 port 與 VS Code Container 使用的 port 相撞，須更改 VS Code Container 的 port

    ```json
    // 在 marketplace-local-vscode/.devcontainer 下找到 devcontainer.json
    // 然後找到下面這段
    "runArgs": [
        "-e",
        "HOST_OS=Darwin",
        "-p",
        "127.0.0.1:443:8080"
    ],
    
    // 把它改成
    "runArgs": [
        "-e",
        "HOST_OS=Darwin",
        "-p",
        "127.0.0.1:442:8080"
    ]
    ```

- Step3: `cmd` + `shift` + `P` 開啟 VS code 指令介面

- Step4: 輸入 `Rebuild and Reopen in Container` 或是 `Reopen in Container`

---

### 連線至開發機

[參考資料](https://xenby.com/b/220-%E6%95%99%E5%AD%B8-%E7%94%A2%E7%94%9Fssh-key%E4%B8%A6%E4%B8%94%E9%80%8F%E9%81%8Ekey%E9%80%B2%E8%A1%8C%E5%85%8D%E5%AF%86%E7%A2%BC%E7%99%BB%E5%85%A5)

**Step1: 先在 local 產生 ssh key，不要設定 paraphrase**

```bash
ssh-keygen
```

**Step2: 用另一台已經可以連線至開發機的電腦將剛產生的公鑰設定至開發機**

- @ 新電腦

    ```bash
    # 顯示公鑰
    cat ~/.ssh/id_rsa.pub
    
    # command + C 複製
    
    # 想辦法傳給一台已經可以連線至開發機的電腦
    ```

- @ 舊電腦

    ```bash
    # 連線至開發機
    ssh office.pinkoi.com
    
    # 新增公鑰在 ~/.ssh/authorized_keys 檔案內
    echo "your-public-key" >> ~/.ssh/authorized_keys
    ```

---

### 使用 CLI 存取開發環境的資料庫

#TODO 