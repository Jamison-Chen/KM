# 開發環境

### TablePlus Settings

#TODO 

### 使用自己寫的 script

**Step1: **`make tunnel` 連線資料庫

**Step2: **`make shell` 進入設定好 Python 環境的 bash shell

**Step3: ** `cd` 至要執行的 script 檔案的位置

**Step4: ** `python <file-name>.py` 執行檔案

# Staging 環境

#TODO 

# 正式環境

### TablePlus Settings

#TODO 

# Athena

SQL Lab: <https://bi.ioknip.com/superset/sqllab>

### CDC

Table: `ath_st_cdc_log`

Example:

```sql
SELECT
    *
FROM
    ath_st_cdc_log
WHERE
    table_name = 'campaign_ta_manager'
    AND event_date > '2023-05-01'
    AND data_after['campaign_id']['value'] = '2023_GraduationSeason';
```

常用的 columns: `event_timestamp, table_name, operations, data_before, data_after, diff_cols`

### 通知紀錄

Table: `ath_noti`

Example:

```sql
SELECT
  uid, action, props
FROM
  ath_noti
WHERE
  uid = 'alpacanokyoudai'
  AND action = 'receive'
  AND props['channel'] = 'email'
  AND created > date('2021-05-02')
ORDER BY created DESC;
```

### 查詢 IP 紀錄

Tables

- `ath_st_client_side_tracking`
- `ath_ig_server_tracking`
- `ath_pq_event`
- `ath_pq_page_view`
